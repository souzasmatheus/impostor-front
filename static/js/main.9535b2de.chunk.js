(this["webpackJsonpimpostor-front"]=this["webpackJsonpimpostor-front"]||[]).push([[0],{110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),o=(a(86),a(7)),u=(a(87),a(17)),i=a.n(u),s=a(25),m=a(23),d=a.n(m),p=a(38),h=a(155),E=a(143),f=a(156);var b=function(e){var t=e.setAuthToken,a=Object(n.useState)(null),c=Object(o.a)(a,2),l=c[0],u=c[1],m=Object(n.useState)(null),b=Object(o.a)(m,2),g=b[0],v=b[1],y=function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("".concat("https://impostor-backend.herokuapp.com","/api/admin/login"),{password:l});case 3:a=e.sent,t(a.headers["auth-token"]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v("Ocorreu um erro. Por favor, tente fazer login novamente.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{paragraph:!0,style:{marginTop:"5%",marginBottom:"5%"},align:"center",variant:"h2"},"Identifique-se, estatista!"),g&&r.a.createElement(f.a,{style:{marginBottom:"3%"},severity:"error"},g),r.a.createElement(h.a,{type:"password",style:{float:"right"},fullWidth:!0,label:"Senha",variant:"outlined",onChange:function(e){return u(e.target.value)}}),r.a.createElement(E.a,{onClick:function(){return y()},style:{float:"right",marginTop:"3%"},variant:"outlined"},"Login"))},g=a(15),v=a(145),y=a(146),k=a(144),j=a(147),O=a(142),x=a(63),S=a.n(x),w=a(111),T=a(62),C=a.n(T),F=a(149),P=a(153),B=a(152),W=a(148),I=a(150),A=a(151),D=a(36),L=a.n(D);var N=function(e){var t=e.addToDB,a=e.addFailure,c=e.addSuccess,l=e.isAdding,u=Object(n.useState)(""),i=Object(o.a)(u,2),s=i[0],m=i[1],d=Object(n.useState)(null),p=Object(o.a)(d,2),b=p[0],x=p[1],T=Object(n.useState)(""),D=Object(o.a)(T,2),N=D[0],q=D[1],_=Object(n.useState)([]),J=Object(o.a)(_,2),z=J[0],R=J[1],G=Object(n.useState)([]),H=Object(o.a)(G,2),K=H[0],M=H[1],Q=z.map((function(e,t){return r.a.createElement(w.a,{key:"keyword-".concat(t+1),variant:"outlined",style:{padding:"2px",display:"inline-flex",alignItems:"center",marginRight:"2px"}},e,r.a.createElement(C.a,{onClick:function(){return function(e){var t=z.filter((function(t,a){return a!==e}));R(t)}(t)},style:{cursor:"pointer"}}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{maxWidth:"sm"},r.a.createElement(v.a,null,a&&r.a.createElement(f.a,{severity:"error"},a),c&&r.a.createElement(f.a,{severity:"success"},c),r.a.createElement(y.a,{title:"Adicione um produto"}),r.a.createElement(j.a,null,r.a.createElement("div",{style:{display:"flex",marginBottom:"10px"}},r.a.createElement(h.a,{onChange:function(e){return m(e.target.value)},value:s,fullWidth:!0,label:"Nome",variant:"outlined"}),r.a.createElement(h.a,{style:{marginLeft:"10px"},onChange:function(e){return x(Number(e.target.value).toFixed(2))},type:"number",label:"Imposto",variant:"outlined"})),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(h.a,{fullWidth:!0,label:"Palavras-chave",variant:"outlined",value:N,onChange:function(e){return q(e.target.value)}}),r.a.createElement(O.a,{onClick:function(){return R([].concat(Object(g.a)(z),[N])),void q("")}},r.a.createElement(S.a,null))),Q.length>0&&r.a.createElement(w.a,{style:{padding:"10px"},variant:"outlined"},Q),r.a.createElement(E.a,{onClick:function(){return function(){var e={name:s,tax:b,keywords:z};M([].concat(Object(g.a)(K),[e])),m(""),x(""),R([])}()},fullWidth:!0,style:{marginTop:"10px"},variant:"outlined"},"Adicionar produto")),K.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(y.a,{title:"Produtos"}),r.a.createElement(j.a,null,r.a.createElement(W.a,{component:w.a},r.a.createElement(F.a,{"aria-label":"simple table"},r.a.createElement(I.a,null,r.a.createElement(A.a,null,r.a.createElement(B.a,null,"Nome"),r.a.createElement(B.a,{align:"right"},"Descri\xe7\xe3o"),r.a.createElement(B.a,{align:"right"},"Imposto"))),r.a.createElement(P.a,null,K.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{key:"product-".concat(t+1)},r.a.createElement(B.a,{component:"th",scope:"row"},e.name),r.a.createElement(B.a,{align:"right"},e.keywords.join(" | ")),r.a.createElement(B.a,{align:"right"},e.tax,"%"),r.a.createElement(B.a,null,r.a.createElement(L.a,{style:{cursor:"pointer"},color:"secondary",onClick:function(){return function(e){var t=K.filter((function(t,a){return a!==e}));M(t)}(t)}}))))})))))),r.a.createElement(E.a,{fullWidth:!0,style:{marginTop:"10px"},variant:"outlined",onClick:function(){return t(K)}},l?"Loading...":"Enviar para o banco de dados"))))))},q=a(157),_=a(154),J=a(64),z=a.n(J);var R=function(e){var t=e.fetchProducts,a=e.searchFailure,c=e.searchSuccess,l=e.searchedProducts,u=e.deleteFromDB,i=e.deleteSuccess,s=Object(n.useState)(!1),m=Object(o.a)(s,2),d=m[0],E=m[1],b=Object(n.useState)([]),g=Object(o.a)(b,2),x=(g[0],g[1],Object(n.useState)()),S=Object(o.a)(x,2),T=S[0],C=S[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{maxWidth:"sm"},r.a.createElement(v.a,null,a&&r.a.createElement(f.a,{severity:"error"},a),c&&r.a.createElement(f.a,{severity:"success"},c),r.a.createElement(y.a,{title:"Lista de Produtos",subheader:r.a.createElement(p.a,{component:"div"},r.a.createElement(_.a,{component:"label",container:!0,alignItems:"center",spacing:1},r.a.createElement(_.a,{item:!0},"Todos"),r.a.createElement(_.a,{item:!0},r.a.createElement(q.a,{checked:d,color:"primary",onChange:function(){return E(!d)},value:"checkedC"})),r.a.createElement(_.a,{item:!0},"Pesquisar")))}),r.a.createElement(j.a,null,r.a.createElement("div",{style:{display:"flex",marginBottom:"10px"}},r.a.createElement(h.a,{onChange:function(e){return C(e.target.value)},fullWidth:!0,label:"Pesquisar",variant:"outlined",disabled:!d}),r.a.createElement(O.a,{onClick:function(){d?t(T):t()}},r.a.createElement(z.a,null))),l&&r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(f.a,{severity:"success"},i),r.a.createElement(W.a,{component:w.a},r.a.createElement(F.a,{"aria-label":"simple table"},r.a.createElement(I.a,null,r.a.createElement(A.a,null,r.a.createElement(B.a,null,"Nome"),r.a.createElement(B.a,{align:"right"},"Descri\xe7\xe3o"),r.a.createElement(B.a,{align:"right"},"Imposto"))),r.a.createElement(P.a,null,l.map((function(e,t){return r.a.createElement(A.a,{key:"searchedProduct-".concat(t+1)},r.a.createElement(B.a,{component:"th",scope:"row"},e.name),r.a.createElement(B.a,{align:"right"},e.keywords.join(" | ")),r.a.createElement(B.a,{align:"right"},e.tax,"%"),r.a.createElement(B.a,null,r.a.createElement(L.a,{style:{cursor:"pointer"},color:"secondary",onClick:function(){return t=e._id,void u(t);var t}})))}))))))))))};var G=function(e){var t=e.authToken,a=Object(n.useState)(null),c=Object(o.a)(a,2),l=c[0],u=c[1],m=Object(n.useState)(null),p=Object(o.a)(m,2),h=p[0],E=p[1],f=Object(n.useState)(null),b=Object(o.a)(f,2),g=b[0],v=b[1],y=Object(n.useState)(null),k=Object(o.a)(y,2),j=k[0],O=k[1],x=Object(n.useState)(null),S=Object(o.a)(x,2),w=S[0],T=S[1],C=Object(n.useState)(null),F=Object(o.a)(C,2),P=F[0],B=F[1],W=Object(n.useState)(null),I=Object(o.a)(W,2),A=I[0],D=I[1],L=function(){var e=Object(s.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(null),u(null),v(!0),e.prev=3,e.next=6,d.a.post("".concat("https://impostor-backend.herokuapp.com","/api/admin/add-products"),{products:a},{headers:{"auth-token":t}});case 6:n=e.sent,u(n.data.message),v(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),E("There has been an error sending data"),v(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(null),e.prev=1,e.next=4,d.a.delete("".concat("https://impostor-backend.herokuapp.com","/api/admin/product"),{headers:{"auth-token":t},data:{_id:a}});case 4:n=e.sent,r=j.filter((function(e){return e._id!==a})),O(r),D(n.data.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),E("There has been an error tryinh to delete product");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();function J(){return(J=Object(s.a)(i.a.mark((function e(){var t,a,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(null),B(null),!n[0]){e.next=15;break}return e.prev=3,e.next=6,d.a.get("".concat("https://impostor-backend.herokuapp.com","/api/product/search?product=").concat(n[0]));case 6:t=e.sent,O(t.data.products),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),T("There has been an error trying to fetch products");case 13:e.next=26;break;case 15:return e.prev=15,e.next=18,d.a.get("".concat("https://impostor-backend.herokuapp.com","/api/product/all"));case 18:a=e.sent,O(a.data.products),a.data.products.length>0?B("Products successfully fetched"):B("Start adding products to database :)"),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(15),T("There has been an error trying to fetch products");case 26:case"end":return e.stop()}}),e,null,[[3,10],[15,23]])})))).apply(this,arguments)}return r.a.createElement(_.a,{container:!0},r.a.createElement(_.a,{style:{marginTop:"10%"},item:!0,xs:12,md:6},r.a.createElement(N,{addToDB:L,addFailure:h,addSuccess:l,isAdding:g})),r.a.createElement(_.a,{style:{marginTop:"10%"},item:!0,xs:12,md:6},r.a.createElement(R,{searchFailure:w,searchSuccess:P,searchedProducts:j,fetchProducts:function(){return J.apply(this,arguments)},deleteSuccess:A,deleteFromDB:q})))};var H=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1];return a?r.a.createElement(k.a,null,r.a.createElement(G,{authToken:a})):r.a.createElement(k.a,{maxWidth:"sm"},r.a.createElement(b,{setAuthToken:c}))};l.a.render(r.a.createElement(H,null),document.getElementById("root"))},81:function(e,t,a){e.exports=a(110)},86:function(e,t,a){},87:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.9535b2de.chunk.js.map